import{B as le,r as g,c as U,s as re,j as G,a as f,w as b,b as j,d as e,f as l,k as p,u as i,h as ie,l as h,e as v,t as r,n as $,o as n,F as T,g as S,i as B,T as R,y as A,m as P,z as F,p as V}from"./app-BlX80OYe.js";import{A as de}from"./AppLayout-D2YrHdCO.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const me={class:"page-header"},ce={class:"flex items-center gap-3"},pe={class:"page-title"},ye={class:"flex items-center gap-3 flex-wrap"},ve={key:0,class:"card p-4 mb-6 flex items-center justify-between"},be={class:"text-sm text-gray-400"},fe={key:0},he={key:1},xe={class:"flex gap-3"},ge=["disabled"],ke={key:1,class:"card p-4 mb-6 flex items-center justify-between"},we={class:"text-sm text-gray-400"},Ce={class:"mb-8"},_e={class:"flex items-center justify-between mb-4"},Te={key:0,class:"card p-8 text-center text-gray-400"},Se={key:1,class:"grid gap-4 md:grid-cols-2"},Me={class:"flex items-center justify-between mb-3"},je={class:"flex items-center gap-3"},Be={class:"text-lg font-semibold text-white"},Ae={key:0,class:"flex gap-2"},Pe=["onClick"],Fe=["onClick"],Ve={class:"space-y-2"},Le={class:"text-sm text-white"},$e={class:"text-sm text-white"},ze={key:0,class:"flex gap-2"},Ee=["onClick"],Ne=["onClick"],De=["onClick"],Ue={key:2,class:"mb-8"},Re={class:"card overflow-hidden"},qe={class:"table"},Ge={class:"font-semibold"},He={class:"flex items-center gap-2"},Ie={class:"text-right"},Oe={class:"text-right font-semibold text-primary"},We={key:3,class:"mb-8"},Ye={class:"flex items-center justify-between mb-4"},Je={class:"text-sm font-semibold text-gray-400 uppercase mb-3"},Ke={class:"grid gap-3 md:grid-cols-2"},Qe={class:"text-right"},Xe={class:"flex items-center justify-end gap-2"},Ze={class:"text-sm text-white"},et={class:"text-xs text-gray-500"},tt={class:"text-center"},st={key:0,class:"flex items-center justify-center gap-2"},nt={class:"score-display text-2xl"},at={class:"score-display text-2xl"},ot={class:"text-left"},lt={class:"flex items-center gap-2"},rt={class:"text-sm text-white"},it={class:"text-xs text-gray-500"},dt={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},ut={class:"text-lg font-semibold text-white mb-4"},mt={class:"flex gap-2 flex-wrap"},ct=["onClick"],pt={class:"flex justify-end gap-3 pt-4"},yt=["disabled"],vt={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},bt={class:"text-lg font-semibold text-white mb-4"},ft={class:"flex justify-end gap-3 pt-4"},ht=["disabled"],xt={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4"},gt={class:"mb-6"},kt={class:"relative"},wt=["value"],Ct={__name:"Show",props:{tournament:Object,standings:Array,scheduleStats:Object},setup(o){const m=o,H=le(),k=g(!1),w=g(!1),z=g(!1),M=g(null),C=g(null),_=g(null),L=g(!1),x=U(()=>H.props.flash?.new_tournament_token);re(()=>{x.value&&(z.value=!0)});const I=async()=>{if(x.value)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(x.value);else{const s=document.createElement("textarea");s.value=x.value,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select(),document.execCommand("copy"),document.body.removeChild(s)}L.value=!0,setTimeout(()=>L.value=!1,2e3)}catch(s){console.error("Failed to copy:",s),alert("Failed to copy token. Please copy manually: "+x.value)}},u=G({name:"",description:"",color:"#3B82F6"}),c=G({player1_name:"",player2_name:"",display_name:""}),E=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16"],q=U(()=>m.tournament.status==="draft"&&m.tournament.teams.length>=2&&m.tournament.teams.every(s=>s.pairs.length>=1)),O=U(()=>{if(!m.tournament.matches)return{};const s={};return m.tournament.matches.forEach(t=>{s[t.round_number]||(s[t.round_number]=[]),s[t.round_number].push(t)}),s}),W=()=>{C.value=null,u.reset(),u.color=E[m.tournament.teams.length%E.length],k.value=!0},Y=s=>{C.value=s,u.name=s.name,u.description=s.description||"",u.color=s.color,k.value=!0},J=()=>{C.value?u.put(route("tournaments.teams.update",[m.tournament.id,C.value.id]),{onSuccess:()=>{k.value=!1,u.reset()}}):u.post(route("tournaments.teams.store",m.tournament.id),{onSuccess:()=>{k.value=!1,u.reset()}})},K=s=>{confirm(`Delete team "${s.name}" and all its pairs?`)&&V.delete(route("tournaments.teams.destroy",[m.tournament.id,s.id]))},Q=s=>{M.value=s,_.value=null,c.reset(),w.value=!0},X=(s,t)=>{M.value=s,_.value=t,c.player1_name=t.player1_name,c.player2_name=t.player2_name,c.display_name=t.display_name||"",w.value=!0},Z=()=>{_.value?c.put(route("tournaments.teams.pairs.update",[m.tournament.id,M.value.id,_.value.id]),{onSuccess:()=>{w.value=!1,c.reset()}}):c.post(route("tournaments.teams.pairs.store",[m.tournament.id,M.value.id]),{onSuccess:()=>{w.value=!1,c.reset()}})},ee=(s,t)=>{confirm(`Delete pair "${t.player1_name} & ${t.player2_name}"?`)&&V.delete(route("tournaments.teams.pairs.destroy",[m.tournament.id,s.id,t.id]))},te=()=>{confirm("Generate match schedule? This will replace any existing schedule.")&&V.post(route("tournaments.generate-schedule",m.tournament.id))},se=()=>{confirm("Start the tournament? Teams and pairs cannot be modified after starting.")&&V.post(route("tournaments.start",m.tournament.id))},ne=()=>{confirm("Mark tournament as completed?")&&V.post(route("tournaments.complete",m.tournament.id))},ae=s=>({draft:"badge-info",active:"badge-success",completed:"badge-primary",cancelled:"badge-warning"})[s]||"badge-info",oe=s=>({scheduled:"text-gray-400",in_progress:"text-yellow-400",completed:"text-green-400"})[s]||"text-gray-400";return(s,t)=>(n(),f(de,null,{default:b(()=>[j(i(ie),{title:o.tournament.name},null,8,["title"]),e("div",me,[e("div",null,[j(i(h),{href:s.route("tournaments.index"),class:"text-gray-400 hover:text-white text-sm flex items-center gap-1 mb-2"},{default:b(()=>[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),v(" Back to tournaments ",-1)])]),_:1},8,["href"]),e("div",ce,[e("h1",pe,r(o.tournament.name),1),e("span",{class:$(["badge",ae(o.tournament.status)])},r(o.tournament.status),3)])]),e("div",ye,[j(i(h),{href:s.route("tournaments.statistics",o.tournament.id),class:"btn btn-secondary"},{default:b(()=>[...t[12]||(t[12]=[v(" ðŸ“Š Statistics ",-1)])]),_:1},8,["href"]),j(i(h),{href:s.route("tournaments.leaderboard",o.tournament.id),class:"btn btn-secondary"},{default:b(()=>[...t[13]||(t[13]=[v(" ðŸ† Leaderboard ",-1)])]),_:1},8,["href"]),o.tournament.status!=="draft"?(n(),f(i(h),{key:0,href:s.route("tournaments.scoreboard",o.tournament.id),class:"btn btn-secondary"},{default:b(()=>[...t[14]||(t[14]=[v(" Scoreboard ",-1)])]),_:1},8,["href"])):p("",!0),o.tournament.status!=="draft"?(n(),f(i(h),{key:1,href:s.route("tournaments.tv",o.tournament.id),class:"btn btn-secondary",target:"_blank"},{default:b(()=>[...t[15]||(t[15]=[v(" TV Mode ",-1)])]),_:1},8,["href"])):p("",!0),o.tournament.status==="completed"?(n(),f(i(h),{key:2,href:s.route("tournaments.complete.show",o.tournament.id),class:"btn btn-success"},{default:b(()=>[...t[16]||(t[16]=[v(" ðŸŽ‰ View Winner ",-1)])]),_:1},8,["href"])):p("",!0)])]),o.tournament.status==="draft"?(n(),l("div",ve,[e("div",be,[q.value?(n(),l("span",he," Ready to generate schedule with "+r(o.tournament.teams.length)+" teams. ",1)):(n(),l("span",fe," Add at least 2 teams with pairs to generate schedule. "))]),e("div",xe,[e("button",{onClick:te,class:"btn btn-secondary",disabled:!q.value}," Generate Schedule ",8,ge),o.tournament.matches&&o.tournament.matches.length>0?(n(),l("button",{key:0,onClick:se,class:"btn btn-success"}," Start Tournament ")):p("",!0)])])):p("",!0),o.tournament.status==="active"?(n(),l("div",ke,[e("div",we," Tournament in progress. "+r(o.scheduleStats.total_matches)+" matches scheduled. ",1),e("button",{onClick:ne,class:"btn btn-primary"}," Complete Tournament ")])):p("",!0),e("div",Ce,[e("div",_e,[t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-white"},"Teams",-1)),o.tournament.status==="draft"?(n(),l("button",{key:0,onClick:W,class:"btn btn-sm btn-secondary"}," + Add Team ")):p("",!0)]),o.tournament.teams.length===0?(n(),l("div",Te," No teams yet. Add teams to get started. ")):(n(),l("div",Se,[(n(!0),l(T,null,S(o.tournament.teams,a=>(n(),l("div",{key:a.id,class:"card p-4"},[e("div",Me,[e("div",je,[e("div",{class:"w-4 h-8 rounded",style:B({backgroundColor:a.color})},null,4),e("h3",Be,r(a.name),1)]),o.tournament.status==="draft"?(n(),l("div",Ae,[e("button",{onClick:y=>Y(a),class:"text-gray-400 hover:text-white"},[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Pe),e("button",{onClick:y=>K(a),class:"text-gray-400 hover:text-red-400"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Fe)])):p("",!0)]),e("div",Ve,[(n(!0),l(T,null,S(a.pairs,y=>(n(),l("div",{key:y.id,class:"flex items-center justify-between p-2 rounded bg-white/5"},[e("div",null,[e("span",Le,r(y.player1_name),1),t[20]||(t[20]=e("span",{class:"text-gray-500 mx-2"},"&",-1)),e("span",$e,r(y.player2_name),1)]),o.tournament.status==="draft"?(n(),l("div",ze,[e("button",{onClick:d=>X(a,y),class:"text-gray-400 hover:text-white"},[...t[21]||(t[21]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Ee),e("button",{onClick:d=>ee(a,y),class:"text-gray-400 hover:text-red-400"},[...t[22]||(t[22]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ne)])):p("",!0)]))),128)),o.tournament.status==="draft"?(n(),l("button",{key:0,onClick:y=>Q(a),class:"w-full p-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border border-dashed border-gray-700 transition"}," + Add Pair ",8,De)):p("",!0)])]))),128))]))]),o.standings&&o.standings.length>0?(n(),l("div",Ue,[t[24]||(t[24]=e("h2",{class:"text-xl font-semibold text-white mb-4"},"Standings",-1)),e("div",Re,[e("table",qe,[t[23]||(t[23]=e("thead",null,[e("tr",null,[e("th",null,"Rank"),e("th",null,"Team"),e("th",{class:"text-right"},"Wins"),e("th",{class:"text-right"},"Points")])],-1)),e("tbody",null,[(n(!0),l(T,null,S(o.standings,(a,y)=>(n(),l("tr",{key:a.id},[e("td",Ge,r(y+1),1),e("td",null,[e("div",He,[e("div",{class:"w-3 h-3 rounded",style:B({backgroundColor:a.color})},null,4),v(" "+r(a.name),1)])]),e("td",Ie,r(a.total_wins),1),e("td",Oe,r(a.total_points),1)]))),128))])])])])):p("",!0),o.tournament.matches&&o.tournament.matches.length>0?(n(),l("div",We,[e("div",Ye,[t[26]||(t[26]=e("h2",{class:"text-xl font-semibold text-white"},"Match Schedule",-1)),j(i(h),{href:s.route("tournaments.matches.index",o.tournament.id),class:"btn btn-sm btn-secondary"},{default:b(()=>[...t[25]||(t[25]=[v(" View All Matches ",-1)])]),_:1},8,["href"])]),(n(!0),l(T,null,S(O.value,(a,y)=>(n(),l("div",{key:y,class:"mb-6"},[e("h3",Je,"Round "+r(y),1),e("div",Ke,[(n(!0),l(T,null,S(a.slice(0,4),d=>(n(),f(i(h),{key:d.id,href:s.route("tournaments.matches.show",[o.tournament.id,d.id]),class:"card p-4 match-card hover:bg-white/5 transition"},{default:b(()=>[e("div",Qe,[e("div",Xe,[e("span",Ze,r(d.home_pair?.player1_name)+" & "+r(d.home_pair?.player2_name),1),e("div",{class:"w-2 h-2 rounded",style:B({backgroundColor:d.home_pair?.team?.color})},null,4)]),e("div",et,r(d.home_pair?.team?.name),1)]),e("div",tt,[d.status==="completed"?(n(),l("div",st,[e("span",nt,r(d.scores?.reduce((N,D)=>N+D.home_score,0)),1),t[27]||(t[27]=e("span",{class:"text-gray-500"},"-",-1)),e("span",at,r(d.scores?.reduce((N,D)=>N+D.away_score,0)),1)])):(n(),l("div",{key:1,class:$(["text-xs uppercase",oe(d.status)])},r(d.status.replace("_"," ")),3))]),e("div",ot,[e("div",lt,[e("div",{class:"w-2 h-2 rounded",style:B({backgroundColor:d.away_pair?.team?.color})},null,4),e("span",rt,r(d.away_pair?.player1_name)+" & "+r(d.away_pair?.player2_name),1)]),e("div",it,r(d.away_pair?.team?.name),1)])]),_:2},1032,["href"]))),128))])]))),128))])):p("",!0),(n(),f(R,{to:"body"},[k.value?(n(),l("div",dt,[e("div",{class:"card p-6 w-full max-w-md animate-slide-up",onClick:t[3]||(t[3]=A(()=>{},["stop"]))},[e("h3",ut,r(C.value?"Edit Team":"Add Team"),1),e("form",{onSubmit:A(J,["prevent"]),class:"space-y-4"},[e("div",null,[t[28]||(t[28]=e("label",{class:"label"},"Team Name",-1)),P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>i(u).name=a),type:"text",class:"input",placeholder:"e.g., Team Alpha",required:""},null,512),[[F,i(u).name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"label"},"Description (optional)",-1)),P(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>i(u).description=a),class:"input",rows:"2"},null,512),[[F,i(u).description]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"label"},"Team Color",-1)),e("div",mt,[(n(),l(T,null,S(E,a=>e("button",{key:a,type:"button",onClick:y=>i(u).color=a,class:$(["w-8 h-8 rounded-lg transition-transform",{"ring-2 ring-white ring-offset-2 ring-offset-gray-900 scale-110":i(u).color===a}]),style:B({backgroundColor:a})},null,14,ct)),64))])]),e("div",pt,[e("button",{type:"button",onClick:t[2]||(t[2]=a=>k.value=!1),class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:i(u).processing},r(C.value?"Save Changes":"Add Team"),9,yt)])],32)])])):p("",!0)])),(n(),f(R,{to:"body"},[w.value?(n(),l("div",vt,[e("div",{class:"card p-6 w-full max-w-md animate-slide-up",onClick:t[8]||(t[8]=A(()=>{},["stop"]))},[e("h3",bt,r(_.value?"Edit Pair":"Add Pair")+" - "+r(M.value?.name),1),e("form",{onSubmit:A(Z,["prevent"]),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"label"},"Player 1 Name",-1)),P(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>i(c).player1_name=a),type:"text",class:"input",placeholder:"First player name",required:""},null,512),[[F,i(c).player1_name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"label"},"Player 2 Name",-1)),P(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>i(c).player2_name=a),type:"text",class:"input",placeholder:"Second player name",required:""},null,512),[[F,i(c).player2_name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"label"},"Display Name (optional)",-1)),P(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>i(c).display_name=a),type:"text",class:"input",placeholder:"e.g., The Topspin Twins"},null,512),[[F,i(c).display_name]]),t[34]||(t[34]=e("p",{class:"mt-1 text-xs text-gray-500"},'Leave blank to use "Player1 & Player2"',-1))]),e("div",ft,[e("button",{type:"button",onClick:t[7]||(t[7]=a=>w.value=!1),class:"btn btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:i(c).processing},r(_.value?"Save Changes":"Add Pair"),9,ht)])],32)])])):p("",!0)])),(n(),f(R,{to:"body"},[z.value&&x.value?(n(),l("div",xt,[e("div",{class:"card p-6 w-full max-w-md animate-slide-up",onClick:t[10]||(t[10]=A(()=>{},["stop"]))},[t[37]||(t[37]=e("div",{class:"text-center mb-6"},[e("div",{class:"w-16 h-16 mx-auto bg-green-500/20 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("h3",{class:"text-xl font-bold text-white mb-2"},"Tournament Created!"),e("p",{class:"text-gray-400 text-sm"},[v(" Save this access token to manage your tournament later. "),e("strong",{class:"text-yellow-400"},"This is the only time you'll see it!")])],-1)),e("div",gt,[t[35]||(t[35]=e("label",{class:"label"},"Your Access Token",-1)),e("div",kt,[e("input",{type:"text",value:x.value,readonly:"",class:"input font-mono text-sm pr-24"},null,8,wt),e("button",{onClick:I,class:$(["absolute right-2 top-1/2 -translate-y-1/2 btn btn-sm",L.value?"btn-success":"btn-primary"])},r(L.value?"âœ“ Copied!":"Copy"),3)]),t[36]||(t[36]=e("p",{class:"mt-2 text-xs text-gray-500"}," Share this token with co-organizers who need to manage the tournament. ",-1))]),t[38]||(t[38]=e("div",{class:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6"},[e("div",{class:"flex items-start gap-3"},[e("svg",{class:"w-5 h-5 text-yellow-400 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("div",{class:"text-sm text-yellow-200"},[e("strong",null,"Important:"),v(" Store this token somewhere safe. You'll need it to edit teams, start matches, or make changes to the tournament. ")])])],-1)),e("button",{onClick:t[9]||(t[9]=a=>z.value=!1),class:"btn btn-primary w-full"}," I've Saved My Token ")])])):p("",!0)]))]),_:1}))}},jt=ue(Ct,[["__scopeId","data-v-8d843331"]]);export{jt as default};
