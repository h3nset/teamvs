import{r as u,j as A,c as h,a as I,w as v,b as x,d as t,f as N,k as V,u as m,h as H,l as P,e as _,t as a,i as f,o as b,m as z}from"./app-qcyNItEV.js";import{A as D}from"./AppLayout-C0j7yqQO.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const F={class:"page-header"},O={class:"flex items-center gap-3"},T={class:"text-sm text-gray-400"},L={class:"flex gap-1"},R=["disabled"],$={class:"card p-8 mb-6"},q={class:"text-center text-sm text-gray-500 mb-4"},G={class:"grid grid-cols-3 gap-4 items-center"},J={class:"text-center"},K={class:"flex items-center justify-center gap-2 mb-4"},Q={class:"text-left"},U={class:"font-semibold text-white text-lg"},W={class:"font-semibold text-white text-lg"},X={class:"space-y-4"},Y={class:"score-display text-7xl text-white py-4"},Z={class:"text-center flex flex-col items-center justify-center h-full"},tt={class:"flex items-center gap-4"},et={class:"text-4xl font-bold text-white"},st={class:"text-4xl font-bold text-white"},at={class:"mt-6 text-sm text-gray-500"},ot={class:"text-2xl font-semibold text-gray-300"},ct={class:"text-center"},lt={class:"flex items-center justify-center gap-2 mb-4"},nt={class:"text-right"},it={class:"font-semibold text-white text-lg"},rt={class:"font-semibold text-white text-lg"},dt={class:"space-y-4"},ut={class:"score-display text-7xl text-white py-4"},mt={key:0,class:"fixed bottom-4 right-4 bg-primary text-white px-4 py-2 rounded-full text-sm flex items-center gap-2"},ht={__name:"ScoreInput",props:{tournament:Object,match:Object,pointsPerSet:Number},setup(n){const o=n,i=u(1),c=u(0),l=u(0);if(o.match.scores&&o.match.scores.length>0){const e=o.match.scores[o.match.scores.length-1];i.value=e.set_number,c.value=e.home_score,l.value=e.away_score}const r=A({set_number:i.value,home_score:c.value,away_score:l.value,is_tiebreak:!1,device_id:localStorage.getItem("device_id")||p()});function p(){const e="device_"+Math.random().toString(36).substring(2,15);return localStorage.setItem("device_id",e),e}const g=()=>{c.value<o.pointsPerSet&&(c.value++,d())},w=()=>{c.value>0&&(c.value--,d())},y=()=>{l.value<o.pointsPerSet&&(l.value++,d())},S=()=>{l.value>0&&(l.value--,d())},d=()=>{r.set_number=i.value,r.home_score=c.value,r.away_score=l.value,r.post(route("tournaments.matches.score.store",[o.tournament.id,o.match.id]),{preserveScroll:!0,onSuccess:()=>{}})},k=()=>{i.value++,c.value=0,l.value=0},C=()=>{if(i.value>1){i.value--;const e=o.match.scores?.find(s=>s.set_number===i.value);e?(c.value=e.home_score,l.value=e.away_score):(c.value=0,l.value=0)}},j=()=>{confirm("Complete this match? Final scores will be locked.")&&z.post(route("tournaments.matches.complete",[o.tournament.id,o.match.id]))},B=h(()=>{let e=0;return o.match.scores?.forEach(s=>{s.set_number<i.value&&(e+=s.home_score)}),e+c.value}),M=h(()=>{let e=0;return o.match.scores?.forEach(s=>{s.set_number<i.value&&(e+=s.away_score)}),e+l.value});return(e,s)=>(b(),I(D,null,{default:v(()=>[x(m(H),{title:`Score - Match #${n.match.match_number}`},null,8,["title"]),t("div",F,[x(m(P),{href:e.route("tournaments.matches.show",[n.tournament.id,n.match.id]),class:"text-gray-400 hover:text-white flex items-center gap-1"},{default:v(()=>[...s[0]||(s[0]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),_(" Back ",-1)])]),_:1},8,["href"]),t("div",O,[t("span",T,"Set "+a(i.value),1),t("div",L,[t("button",{onClick:C,disabled:i.value<=1,class:"btn btn-sm btn-secondary"}," ← Prev ",8,R),t("button",{onClick:k,class:"btn btn-sm btn-secondary"}," Next → ")])])]),t("div",$,[t("div",q," Round "+a(n.match.round_number)+" • Match #"+a(n.match.match_number),1),t("div",G,[t("div",J,[t("div",K,[t("div",{class:"w-4 h-8 rounded",style:f({backgroundColor:n.match.home_pair?.team?.color})},null,4),t("div",Q,[t("div",U,a(n.match.home_pair?.player1_name),1),t("div",W,a(n.match.home_pair?.player2_name),1)])]),t("div",X,[t("button",{onClick:g,class:"w-full py-8 text-6xl font-bold text-white bg-white/10 rounded-xl hover:bg-white/20 active:bg-white/30 transition touch-manipulation"}," + "),t("div",Y,a(c.value),1),t("button",{onClick:w,class:"w-full py-6 text-4xl font-bold text-gray-400 bg-white/5 rounded-xl hover:bg-white/10 active:bg-white/15 transition touch-manipulation"}," − ")])]),t("div",Z,[s[2]||(s[2]=t("div",{class:"text-gray-500 text-sm mb-2"},"Total",-1)),t("div",tt,[t("span",et,a(B.value),1),s[1]||(s[1]=t("span",{class:"text-2xl text-gray-600"},"-",-1)),t("span",st,a(M.value),1)]),t("div",at," Set "+a(i.value)+" Score ",1),t("div",ot,a(c.value)+" - "+a(l.value),1)]),t("div",ct,[t("div",lt,[t("div",nt,[t("div",it,a(n.match.away_pair?.player1_name),1),t("div",rt,a(n.match.away_pair?.player2_name),1)]),t("div",{class:"w-4 h-8 rounded",style:f({backgroundColor:n.match.away_pair?.team?.color})},null,4)]),t("div",dt,[t("button",{onClick:y,class:"w-full py-8 text-6xl font-bold text-white bg-white/10 rounded-xl hover:bg-white/20 active:bg-white/30 transition touch-manipulation"}," + "),t("div",ut,a(l.value),1),t("button",{onClick:S,class:"w-full py-6 text-4xl font-bold text-gray-400 bg-white/5 rounded-xl hover:bg-white/10 active:bg-white/15 transition touch-manipulation"}," − ")])])])]),t("div",{class:"flex justify-center gap-4"},[t("button",{onClick:j,class:"btn btn-success btn-lg"}," Complete Match ")]),m(r).processing?(b(),N("div",mt,[...s[3]||(s[3]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Saving... ",-1)])])):V("",!0)]),_:1}))}},bt=E(ht,[["__scopeId","data-v-5faff90b"]]);export{bt as default};
