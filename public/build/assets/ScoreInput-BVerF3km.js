import{r as b,j as F,c as r,q as O,p as P,a as q,w as M,b as j,d as e,f as v,k as p,u as g,h as L,l as R,e as y,t as o,o as m,i as w,n as S}from"./app-DzME5Dyu.js";import{A as G}from"./AppLayout-BEajad0K.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const K={class:"page-header"},Q={class:"flex items-center gap-3"},U={class:"text-sm text-gray-400"},W={class:"flex gap-1"},X=["disabled"],Y={class:"card p-8 mb-6"},Z={class:"text-center text-sm text-gray-500 mb-4"},ee={key:0,class:"ml-2 text-amber-400"},te={key:0,class:"mb-6"},se={class:"flex justify-between text-sm mb-2"},ae={class:"text-white font-medium"},oe={class:"h-3 bg-gray-700 rounded-full overflow-hidden"},ne={key:0,class:"text-center text-sm text-gray-400 mt-2"},le={key:1,class:"text-center text-sm text-green-400 mt-2 font-medium"},ce={class:"grid grid-cols-3 gap-4 items-center"},ie={class:"text-center"},re={class:"flex items-center justify-center gap-2 mb-4"},ue={class:"text-left"},de={class:"font-semibold text-white text-lg"},me={class:"font-semibold text-white text-lg"},he={class:"space-y-4"},ve=["disabled"],xe={class:"score-display text-7xl text-white py-4"},_e={class:"text-center flex flex-col items-center justify-center h-full"},fe={class:"flex items-center gap-4"},be={class:"text-4xl font-bold text-white"},pe={class:"text-4xl font-bold text-white"},ge={class:"mt-6 text-sm text-gray-500"},ye={class:"text-2xl font-semibold text-gray-300"},we={class:"text-center"},Se={class:"flex items-center justify-center gap-2 mb-4"},ke={class:"text-right"},Ce={class:"font-semibold text-white text-lg"},Pe={class:"font-semibold text-white text-lg"},Me={class:"space-y-4"},je=["disabled"],Ae={class:"score-display text-7xl text-white py-4"},Ie={key:0,class:"fixed bottom-4 right-4 bg-primary text-white px-4 py-2 rounded-full text-sm flex items-center gap-2"},Be={__name:"ScoreInput",props:{tournament:Object,match:Object,pointsPerSet:Number},setup(c){const t=c,i=b(1),n=b(0),l=b(0);if(t.match.scores&&t.match.scores.length>0){const s=t.match.scores[t.match.scores.length-1];i.value=s.set_number,n.value=s.home_score,l.value=s.away_score}const h=F({set_number:i.value,home_score:n.value,away_score:l.value,is_tiebreak:!1,device_id:localStorage.getItem("device_id")||A()});function A(){const s="device_"+Math.random().toString(36).substring(2,15);return localStorage.setItem("device_id",s),s}const u=r(()=>t.tournament.scoring_mode==="americano"),d=r(()=>n.value+l.value),k=r(()=>u.value?t.pointsPerSet-d.value:null),I=r(()=>u.value?Math.min(d.value/t.pointsPerSet*100,100):0),C=r(()=>u.value&&d.value>=t.pointsPerSet),_=r(()=>u.value?d.value<t.pointsPerSet:n.value<t.pointsPerSet),f=r(()=>u.value?d.value<t.pointsPerSet:l.value<t.pointsPerSet),B=()=>{_.value&&(n.value++,x())},N=()=>{n.value>0&&(n.value--,x())},T=()=>{f.value&&(l.value++,x())},H=()=>{l.value>0&&(l.value--,x())};O(C,s=>{s&&setTimeout(()=>{confirm(`Target reached! ${n.value} + ${l.value} = ${t.pointsPerSet}

Complete this match now?`)&&P.post(route("tournaments.matches.complete",[t.tournament.id,t.match.id]))},300)});const x=()=>{h.set_number=i.value,h.home_score=n.value,h.away_score=l.value,h.post(route("tournaments.matches.score.store",[t.tournament.id,t.match.id]),{preserveScroll:!0,onSuccess:()=>{}})},V=()=>{i.value++,n.value=0,l.value=0},z=()=>{if(i.value>1){i.value--;const s=t.match.scores?.find(a=>a.set_number===i.value);s?(n.value=s.home_score,l.value=s.away_score):(n.value=0,l.value=0)}},$=()=>{confirm("Complete this match? Final scores will be locked.")&&P.post(route("tournaments.matches.complete",[t.tournament.id,t.match.id]))},D=r(()=>{let s=0;return t.match.scores?.forEach(a=>{a.set_number<i.value&&(s+=a.home_score)}),s+n.value}),E=r(()=>{let s=0;return t.match.scores?.forEach(a=>{a.set_number<i.value&&(s+=a.away_score)}),s+l.value});return(s,a)=>(m(),q(G,null,{default:M(()=>[j(g(L),{title:`Score - Match #${c.match.match_number}`},null,8,["title"]),e("div",K,[j(g(R),{href:s.route("tournaments.matches.show",[c.tournament.id,c.match.id]),class:"text-gray-400 hover:text-white flex items-center gap-1"},{default:M(()=>[...a[0]||(a[0]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),y(" Back ",-1)])]),_:1},8,["href"]),e("div",Q,[e("span",U,"Set "+o(i.value),1),e("div",W,[e("button",{onClick:z,disabled:i.value<=1,class:"btn btn-sm btn-secondary"}," â† Prev ",8,X),e("button",{onClick:V,class:"btn btn-sm btn-secondary"}," Next â†’ ")])])]),e("div",Y,[e("div",Z,[y(" Round "+o(c.match.round_number)+" â€¢ Match #"+o(c.match.match_number)+" ",1),u.value?(m(),v("span",ee,"â€¢ Americano Mode")):p("",!0)]),u.value?(m(),v("div",te,[e("div",se,[a[1]||(a[1]=e("span",{class:"text-gray-400"},"Progress",-1)),e("span",ae,o(d.value)+" / "+o(c.pointsPerSet),1)]),e("div",oe,[e("div",{class:S(["h-full transition-all duration-300 rounded-full",C.value?"bg-green-500":"bg-amber-500"]),style:w({width:I.value+"%"})},null,6)]),k.value>0?(m(),v("div",ne,o(k.value)+" points remaining ",1)):(m(),v("div",le," ðŸŽ‰ Target reached! "))])):p("",!0),e("div",ce,[e("div",ie,[e("div",re,[e("div",{class:"w-4 h-8 rounded",style:w({backgroundColor:c.match.home_pair?.team?.color})},null,4),e("div",ue,[e("div",de,o(c.match.home_pair?.player1_name),1),e("div",me,o(c.match.home_pair?.player2_name),1)])]),e("div",he,[e("button",{onClick:B,disabled:!_.value,class:S(["w-full py-8 text-6xl font-bold text-white bg-white/10 rounded-xl transition touch-manipulation",_.value?"hover:bg-white/20 active:bg-white/30":"opacity-40 cursor-not-allowed"])}," + ",10,ve),e("div",xe,o(n.value),1),e("button",{onClick:N,class:"w-full py-6 text-4xl font-bold text-gray-400 bg-white/5 rounded-xl hover:bg-white/10 active:bg-white/15 transition touch-manipulation"}," âˆ’ ")])]),e("div",_e,[a[3]||(a[3]=e("div",{class:"text-gray-500 text-sm mb-2"},"Total",-1)),e("div",fe,[e("span",be,o(D.value),1),a[2]||(a[2]=e("span",{class:"text-2xl text-gray-600"},"-",-1)),e("span",pe,o(E.value),1)]),e("div",ge," Set "+o(i.value)+" Score ",1),e("div",ye,o(n.value)+" - "+o(l.value),1)]),e("div",we,[e("div",Se,[e("div",ke,[e("div",Ce,o(c.match.away_pair?.player1_name),1),e("div",Pe,o(c.match.away_pair?.player2_name),1)]),e("div",{class:"w-4 h-8 rounded",style:w({backgroundColor:c.match.away_pair?.team?.color})},null,4)]),e("div",Me,[e("button",{onClick:T,disabled:!f.value,class:S(["w-full py-8 text-6xl font-bold text-white bg-white/10 rounded-xl transition touch-manipulation",f.value?"hover:bg-white/20 active:bg-white/30":"opacity-40 cursor-not-allowed"])}," + ",10,je),e("div",Ae,o(l.value),1),e("button",{onClick:H,class:"w-full py-6 text-4xl font-bold text-gray-400 bg-white/5 rounded-xl hover:bg-white/10 active:bg-white/15 transition touch-manipulation"}," âˆ’ ")])])])]),e("div",{class:"flex justify-center gap-4"},[e("button",{onClick:$,class:"btn btn-success btn-lg"}," Complete Match ")]),g(h).processing?(m(),v("div",Ie,[...a[4]||(a[4]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Saving... ",-1)])])):p("",!0)]),_:1}))}},ze=J(Be,[["__scopeId","data-v-07df356d"]]);export{ze as default};
