import{r as p,j as C,c as N,f as r,b as g,u as i,h as V,w as h,d as t,a as _,l as D,e as u,t as l,k as y,o as d,F as A,g as z,n as I,T as S,m as $,v as U,p as E}from"./app-DzME5Dyu.js";import{A as H}from"./AppLayout-BEajad0K.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const q={class:"page-header"},G={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8"},J={class:"card p-4 text-center"},K={class:"text-3xl font-bold text-white"},P={class:"card p-4 text-center"},Q={class:"text-3xl font-bold text-blue-400"},R={class:"card p-4 text-center"},W={class:"text-3xl font-bold text-green-400"},X={class:"card p-4 text-center"},Z={class:"text-3xl font-bold text-primary"},tt={class:"card p-4 text-center"},et={class:"text-3xl font-bold text-yellow-400"},st={class:"card p-4 mb-6 flex flex-wrap items-center justify-between gap-4"},lt={class:"flex flex-wrap gap-3"},nt=["value"],at=["value"],ot={class:"flex gap-3"},dt=["disabled"],it=["disabled"],rt={class:"card overflow-hidden"},ut={class:"table"},ct={class:"w-12"},vt=["checked"],mt=["checked","onChange"],xt={class:"text-gray-400"},ft={key:0},pt={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4"},gt={class:"card p-6 w-full max-w-md animate-slide-up"},bt={class:"text-center mb-6"},ht={class:"text-gray-400"},yt={class:"text-white"},wt={class:"flex gap-3"},kt=["disabled"],Ct={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4"},_t={class:"card p-6 w-full max-w-md animate-slide-up"},Dt={class:"mb-6"},At={class:"mt-2 text-sm text-gray-500"},St={class:"flex gap-3"},jt=["disabled"],Mt={__name:"Index",props:{tournaments:Array,stats:Object,filters:Object},setup(o){const m=o,n=p([]),x=p(!1),f=p(!1),b=p(30),c=C({tournament_ids:[],confirm:!1}),v=C({days:30,confirm:!1}),w=N(()=>m.tournaments.length>0&&n.value.length===m.tournaments.length),j=()=>{w.value?n.value=[]:n.value=m.tournaments.map(a=>a.id)},M=a=>{const e=n.value.indexOf(a);e>-1?n.value.splice(e,1):n.value.push(a)},B=()=>{n.value.length!==0&&(x.value=!0)},T=()=>{c.tournament_ids=n.value,c.confirm=!0,c.delete(route("maintenance.bulk-delete"),{onSuccess:()=>{x.value=!1,n.value=[]}})},O=()=>{v.days=b.value,v.confirm=!0,v.delete(route("maintenance.cleanup"),{onSuccess:()=>{f.value=!1}})},k=(a,e)=>{E.get(route("maintenance.index"),{...m.filters,[a]:e||void 0},{preserveState:!0})},F=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),L=a=>({draft:"badge-info",active:"badge-success",completed:"badge-primary",cancelled:"badge-warning"})[a]||"badge-info";return(a,e)=>(d(),r(A,null,[g(i(V),{title:"Maintenance"}),g(H,null,{default:h(()=>[t("div",q,[t("div",null,[g(i(D),{href:a.route("tournaments.index"),class:"text-gray-400 hover:text-white text-sm flex items-center gap-1 mb-2"},{default:h(()=>[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),u(" Back to tournaments ",-1)])]),_:1},8,["href"]),e[7]||(e[7]=t("h1",{class:"page-title"},"ðŸ”§ Maintenance",-1)),e[8]||(e[8]=t("p",{class:"text-gray-400 mt-1"},"Clean up old tournament data",-1))])]),t("div",G,[t("div",J,[t("div",K,l(o.stats.total),1),e[9]||(e[9]=t("div",{class:"text-sm text-gray-400"},"Total",-1))]),t("div",P,[t("div",Q,l(o.stats.draft),1),e[10]||(e[10]=t("div",{class:"text-sm text-gray-400"},"Draft",-1))]),t("div",R,[t("div",W,l(o.stats.active),1),e[11]||(e[11]=t("div",{class:"text-sm text-gray-400"},"Active",-1))]),t("div",X,[t("div",Z,l(o.stats.completed),1),e[12]||(e[12]=t("div",{class:"text-sm text-gray-400"},"Completed",-1))]),t("div",tt,[t("div",et,l(o.stats.old_completed),1),e[13]||(e[13]=t("div",{class:"text-sm text-gray-400"},">30 days old",-1))])]),t("div",st,[t("div",lt,[t("select",{value:o.filters.status||"",onChange:e[0]||(e[0]=s=>k("status",s.target.value)),class:"input w-auto"},[...e[14]||(e[14]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)])],40,nt),t("select",{value:o.filters.older_than||"",onChange:e[1]||(e[1]=s=>k("older_than",s.target.value)),class:"input w-auto"},[...e[15]||(e[15]=[t("option",{value:""},"Any Age",-1),t("option",{value:"7"},"Older than 7 days",-1),t("option",{value:"30"},"Older than 30 days",-1),t("option",{value:"90"},"Older than 90 days",-1),t("option",{value:"180"},"Older than 180 days",-1)])],40,at)]),t("div",ot,[t("button",{onClick:e[2]||(e[2]=s=>f.value=!0),class:"btn btn-secondary",disabled:o.stats.old_completed===0}," ðŸ§¹ Auto Cleanup ",8,dt),t("button",{onClick:B,class:"btn btn-danger",disabled:n.value.length===0}," ðŸ—‘ï¸ Delete Selected ("+l(n.value.length)+") ",9,it)])]),t("div",rt,[t("table",ut,[t("thead",null,[t("tr",null,[t("th",ct,[t("input",{type:"checkbox",checked:w.value,onChange:j,class:"w-4 h-4"},null,40,vt)]),e[16]||(e[16]=t("th",null,"Tournament",-1)),e[17]||(e[17]=t("th",null,"Status",-1)),e[18]||(e[18]=t("th",null,"Teams",-1)),e[19]||(e[19]=t("th",null,"Matches",-1)),e[20]||(e[20]=t("th",null,"Created",-1))])]),t("tbody",null,[(d(!0),r(A,null,z(o.tournaments,s=>(d(),r("tr",{key:s.id},[t("td",null,[t("input",{type:"checkbox",checked:n.value.includes(s.id),onChange:Bt=>M(s.id),class:"w-4 h-4"},null,40,mt)]),t("td",null,[g(i(D),{href:a.route("tournaments.show",s.id),class:"text-white hover:text-primary"},{default:h(()=>[u(l(s.name),1)]),_:2},1032,["href"])]),t("td",null,[t("span",{class:I(["badge",L(s.status)])},l(s.status),3)]),t("td",null,l(s.teams_count),1),t("td",null,l(s.matches_count),1),t("td",xt,l(F(s.created_at)),1)]))),128)),o.tournaments.length===0?(d(),r("tr",ft,[...e[21]||(e[21]=[t("td",{colspan:"6",class:"text-center text-gray-400 py-8"}," No tournaments found matching the filters. ",-1)])])):y("",!0)])])]),(d(),_(S,{to:"body"},[x.value?(d(),r("div",pt,[t("div",gt,[t("div",bt,[e[24]||(e[24]=t("div",{class:"w-16 h-16 mx-auto bg-red-500/20 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-white mb-2"},"Delete Tournaments?",-1)),t("p",ht,[e[22]||(e[22]=u(" You are about to permanently delete ",-1)),t("strong",yt,l(n.value.length),1),e[23]||(e[23]=u(" tournament(s). This action cannot be undone. ",-1))])]),t("div",wt,[t("button",{onClick:e[3]||(e[3]=s=>x.value=!1),class:"btn btn-secondary flex-1"}," Cancel "),t("button",{onClick:T,class:"btn btn-danger flex-1",disabled:i(c).processing},l(i(c).processing?"Deleting...":"Delete All"),9,kt)])])])):y("",!0)])),(d(),_(S,{to:"body"},[f.value?(d(),r("div",Ct,[t("div",_t,[e[27]||(e[27]=t("div",{class:"text-center mb-6"},[t("div",{class:"w-16 h-16 mx-auto bg-yellow-500/20 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-8 h-8 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),t("h3",{class:"text-xl font-bold text-white mb-2"},"Auto Cleanup"),t("p",{class:"text-gray-400"},[u(" Delete all "),t("strong",{class:"text-white"},"completed"),u(" tournaments older than: ")])],-1)),t("div",Dt,[$(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>b.value=s),class:"input w-full"},[...e[26]||(e[26]=[t("option",{value:7},"7 days",-1),t("option",{value:30},"30 days",-1),t("option",{value:60},"60 days",-1),t("option",{value:90},"90 days",-1),t("option",{value:180},"180 days",-1)])],512),[[U,b.value]]),t("p",At," This will delete "+l(o.stats.old_completed)+" tournament(s) that are currently older than 30 days. ",1)]),t("div",St,[t("button",{onClick:e[5]||(e[5]=s=>f.value=!1),class:"btn btn-secondary flex-1"}," Cancel "),t("button",{onClick:O,class:"btn btn-warning flex-1",disabled:i(v).processing},l(i(v).processing?"Cleaning...":"Cleanup Now"),9,jt)])])])):y("",!0)]))]),_:1})],64))}},Nt=Y(Mt,[["__scopeId","data-v-38e9cd78"]]);export{Nt as default};
