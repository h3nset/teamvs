<script setup>
import { ref, onMounted } from 'vue';
import html2canvas from 'html2canvas';

const props = defineProps({
    type: {
        type: String,
        default: 'match', // 'match', 'pair', 'tournament'
    },
    data: Object,
    tournament: Object,
});

const emit = defineEmits(['close']);

const cardRef = ref(null);
const isGenerating = ref(false);

const downloadImage = async () => {
    if (!cardRef.value) return;
    
    isGenerating.value = true;
    
    try {
        const canvas = await html2canvas(cardRef.value, {
            backgroundColor: '#1a1a2e',
            scale: 2,
            useCORS: true,
            allowTaint: true,
            // Fix for Tailwind v4 oklch colors not supported by html2canvas
            onclone: (clonedDoc) => {
                const allElements = clonedDoc.querySelectorAll('*');
                allElements.forEach(el => {
                    const style = window.getComputedStyle(el);
                    // Convert any oklch colors to their computed RGB values
                    if (style.color) el.style.color = style.color;
                    if (style.backgroundColor) el.style.backgroundColor = style.backgroundColor;
                    if (style.borderColor) el.style.borderColor = style.borderColor;
                });
            },
        });
        
        const link = document.createElement('a');
        link.download = `${props.tournament?.name || 'result'}-${Date.now()}.png`;
        link.href = canvas.toDataURL('image/png');
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    } catch (error) {
        console.error('Failed to generate image:', error);
        alert('Failed to download image. Please try again.');
    } finally {
        isGenerating.value = false;
    }
};

const shareImage = async () => {
    if (!cardRef.value) return;
    if (!navigator.share) {
        alert('Sharing not supported on this browser. Please download instead.');
        return;
    }
    
    isGenerating.value = true;
    
    try {
        const canvas = await html2canvas(cardRef.value, {
            backgroundColor: '#1a1a2e',
            scale: 2,
        });
        
        canvas.toBlob(async (blob) => {
            const file = new File([blob], 'result.png', { type: 'image/png' });
            
            await navigator.share({
                title: props.tournament?.name || 'Match Result',
                files: [file],
            });
        });
    } catch (error) {
        console.error('Failed to share:', error);
    } finally {
        isGenerating.value = false;
    }
};
</script>

<template>
    <div class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
        <div class="max-w-lg w-full">
            <!-- Card Preview -->
            <div ref="cardRef" class="share-card rounded-xl overflow-hidden">
                <!-- Header -->
                <div class="bg-gradient-to-r from-primary to-pink-600 px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="text-white font-bold text-lg">{{ tournament?.name }}</div>
                        <div class="text-white/70 text-sm"><strong>REZIMAINPADEL</strong><br>versus</div>
                    </div>
                </div>
                
                <!-- Match Result -->
                <div v-if="type === 'match'" class="bg-gray-900 p-6">
                    <div class="text-center text-gray-400 text-sm mb-4">
                        Round {{ data.round_number }} ‚Ä¢ Match #{{ data.match_number }}
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 items-center">
                        <div class="text-right">
                            <div class="flex items-center justify-end gap-2 mb-1">
                                <span class="font-semibold text-white">{{ data.home_pair?.name }}</span>
                                <div class="w-3 h-6 rounded" :style="{ backgroundColor: data.home_pair?.team_color }"></div>
                            </div>
                            <div class="text-xs text-gray-500">{{ data.home_pair?.team }}</div>
                        </div>
                        
                        <div class="text-center">
                            <div class="flex items-center justify-center gap-3">
                                <span class="text-4xl font-bold text-white">{{ data.home_score }}</span>
                                <span class="text-2xl text-gray-600">-</span>
                                <span class="text-4xl font-bold text-white">{{ data.away_score }}</span>
                            </div>
                        </div>
                        
                        <div class="text-left">
                            <div class="flex items-center gap-2 mb-1">
                                <div class="w-3 h-6 rounded" :style="{ backgroundColor: data.away_pair?.team_color }"></div>
                                <span class="font-semibold text-white">{{ data.away_pair?.name }}</span>
                            </div>
                            <div class="text-xs text-gray-500">{{ data.away_pair?.team }}</div>
                        </div>
                    </div>
                </div>
                
                <!-- Pair Stats -->
                <div v-if="type === 'pair'" class="bg-gray-900 p-6">
                    <div class="flex items-center justify-center gap-3 mb-4">
                        <div class="w-4 h-10 rounded" :style="{ backgroundColor: data.team_color }"></div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-white">{{ data.name }}</div>
                            <div class="text-gray-400">{{ data.team_name }}</div>
                        </div>
                        <div class="w-4 h-10 rounded" :style="{ backgroundColor: data.team_color }"></div>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-3xl font-bold text-white">{{ data.matches_played }}</div>
                            <div class="text-xs text-gray-400">Played</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-green-400">{{ data.wins }}</div>
                            <div class="text-xs text-gray-400">Wins</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-white">{{ data.points_for }}</div>
                            <div class="text-xs text-gray-400">Points</div>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Winner -->
                <div v-if="type === 'tournament'" class="bg-gray-900 p-6">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">üèÜ</div>
                        <div class="text-gray-400 text-sm">Champion Team</div>
                    </div>
                    
                    <div class="flex items-center justify-center gap-3 mb-4">
                        <div class="w-4 h-12 rounded" :style="{ backgroundColor: data.color }"></div>
                        <div class="text-3xl font-bold text-white">{{ data.name }}</div>
                        <div class="w-4 h-12 rounded" :style="{ backgroundColor: data.color }"></div>
                    </div>
                    
                    <div class="text-center text-2xl font-bold text-primary">
                        {{ data.total_points }} Points
                    </div>
                </div>
                
                <!-- Footer -->
                <div class="bg-gray-800 px-6 py-3 flex items-center justify-between text-xs text-gray-500">
                    <span>{{ new Date().toLocaleDateString() }}</span>
                    <span> Part of <svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="21.297 5.822 44.472 75.354" width="16" height="34">
                        <path fill-rule="evenodd" d="M43.538 5.822c.634 0 1.42.03 1.832.064.396.034.99.106 1.318.154.328.05.834.136 1.126.192.294.06.846.182 1.232.28.386.094.862.226 1.062.294.2.064.63.212.956.328a18 18 0 0 1 1.466.59l.914.442c.374.182.94.488 1.254.68s.63.378.702.42c.068.038.31.196.532.344.222.154.548.378.722.506s.566.43.872.676c.302.246.77.646 1.036.892s.63.596.804.77c.178.174.468.48.642.68.178.2.412.468.522.596a29 29 0 0 1 1.248 1.608c.05.064.25.366.446.668.192.302.484.782.646 1.062s.46.854.662 1.276.408.842.45.936.154.37.242.616c.094.246.28.782.416 1.19.14.408.31.974.382 1.254s.188.778.256 1.106.162.872.208 1.212c.05.34.118.914.162 1.276.056.488.072 1.028.072 2.082 0 1.08-.018 1.59-.072 2.104-.042.374-.124.978-.182 1.338-.056.362-.136.79-.17.956-.038.166-.136.566-.216.892s-.212.824-.298 1.106-.246.76-.352 1.062a26 26 0 0 1-1.084 2.486c-.144.292-.352.68-.464.858-.106.182-.196.34-.196.352s-.022.046-.042.072c-.026.03-.192.284-.37.566s-.382.59-.454.692l-.404.552a7 7 0 0 1-.298.39c-.018.012-.094.106-.174.212s-.28.352-.446.552c-.162.2-.4.476-.532.616-.128.14-.48.506-.786.808-.306.306-.812.774-1.126 1.042a23 23 0 0 1-1.594 1.28 34 34 0 0 1-.616.426c-.222.154-.596.396-.828.536-.234.144-.586.352-.786.46s-.6.314-.892.46-.646.314-.786.378-.416.182-.616.268a25 25 0 0 1-2.147.766 24 24 0 0 1-1.402.362 25 25 0 0 1-2.486.42c-.22.024-.808.064-1.296.094a22 22 0 0 1-1.636.018 32 32 0 0 1-1.466-.09 19 19 0 0 1-1.488-.188c-.42-.068-.948-.166-1.168-.212-.222-.05-.586-.136-.808-.192s-.68-.192-1.02-.298-.854-.28-1.148-.386a33 33 0 0 1-.956-.378 42 42 0 0 1-.892-.404 19 19 0 0 1-.85-.434l-.722-.408c-.186-.106-.578-.348-.872-.544s-.616-.416-.722-.492c-.106-.072-.45-.328-.766-.56s-.736-.57-.936-.744c-.2-.178-.446-.4-.552-.492-.102-.094-.31-.284-.46-.426a23 23 0 0 1-.812-.828l-.706-.766a11 11 0 0 1-.322-.382c-.08-.106-.276-.352-.43-.552-.148-.2-.4-.532-.548-.744s-.476-.706-.722-1.106-.518-.846-.6-.998c-.086-.154-.216-.408-.302-.574-.08-.166-.256-.528-.382-.808s-.344-.778-.476-1.106-.344-.91-.468-1.296a25 25 0 0 1-.314-1.02 35 35 0 0 1-.408-1.784 22 22 0 0 1-.296-2.317 23 23 0 0 1-.042-1.786c.008-.56.046-1.382.08-1.828.038-.446.128-1.152.196-1.572s.178-.978.238-1.232.182-.744.272-1.084.288-.982.446-1.424.348-.96.426-1.148.302-.676.498-1.084c.2-.408.484-.964.638-1.232s.4-.688.548-.936c.154-.246.454-.696.676-.998s.544-.736.718-.956.37-.464.43-.532c.064-.068.256-.288.43-.488s.522-.578.782-.846c.256-.268.696-.688.982-.936.28-.246.624-.54.766-.65.136-.11.396-.31.57-.446s.386-.298.468-.352.158-.114.17-.128c.012-.018.25-.182.532-.37s.702-.454.936-.596a19 19 0 0 1 1.574-.854 27 27 0 0 1 1.656-.76 25 25 0 0 1 2.294-.762 31 31 0 0 1 2.324-.506 20 20 0 0 1 1.968-.218c.256-.018.476-.034.484-.042s.518-.018 1.126-.018m-1.89 3.993a25 25 0 0 0-1.062.144c-.34.06-.846.154-1.126.216s-.824.208-1.212.328a16 16 0 0 0-1.168.396c-.26.102-.62.256-.808.34s-.638.302-.998.488c-.362.182-.842.442-1.062.574-.222.136-.578.362-.786.502a20 20 0 0 0-1.85 1.424c-.268.234-.662.604-.88.82-.212.222-.442.464-.51.544a4 4 0 0 1-.242.256c-.068.06-.306.34-.532.62a23 23 0 0 0-1.287 1.764c-.126.2-.314.514-.416.702s-.272.502-.386.702a16 16 0 0 0-.544 1.156c-.192.442-.438 1.08-.552 1.424-.118.348-.288.944-.386 1.33-.094.386-.2.862-.238 1.062-.034.2-.08.454-.102.574-.018.114-.068.488-.11.828-.06.48-.076.922-.076 1.998 0 1.182.012 1.484.094 2.082.05.386.148.998.222 1.36s.188.872.256 1.126.212.736.322 1.062a17 17 0 0 0 .982 2.338 18 18 0 0 0 1.046 1.826c.144.212.382.552.536.766.148.212.45.604.668.872s.676.778 1.024 1.13c.344.352.82.812 1.054 1.02.234.212.548.48.702.6s.374.288.498.378a19 19 0 0 0 1.118.778c.174.11.426.264.552.34a48 48 0 0 0 2.168 1.084c.154.068.536.212.85.322s.766.26.998.336a16 16 0 0 0 1.998.468c.282.046.718.114.978.148a21 21 0 0 0 2.698.136c.314-.018.804-.046 1.084-.068.28-.026.718-.076.978-.11.256-.038.65-.102.872-.148s.672-.148.998-.234c.328-.08.842-.234 1.148-.336s.676-.234.828-.288c.154-.06.468-.192.702-.298a26 26 0 0 0 1.87-.936c.162-.094.518-.314.786-.488s.65-.434.85-.574a12 12 0 0 0 1.08-.854c.136-.118.396-.348.574-.514s.416-.396.536-.514c.114-.118.386-.404.604-.638.212-.23.556-.634.766-.892.204-.26.498-.642.646-.85s.4-.578.556-.824.446-.744.65-1.106c.2-.362.51-1.004.688-1.424.182-.42.42-1.042.536-1.382.118-.34.288-.906.378-1.254.094-.352.212-.896.272-1.212a19 19 0 0 0 .272-2.274 18 18 0 0 0-.008-2.104 27 27 0 0 0-.05-.616l-.038-.362c-.008-.082-.038-.31-.064-.51s-.086-.56-.132-.808-.144-.676-.212-.956-.25-.884-.404-1.338a57 57 0 0 0-.4-1.126c-.068-.166-.216-.51-.328-.766-.114-.26-.332-.688-.48-.956s-.382-.68-.522-.914-.4-.634-.578-.884c-.178-.256-.39-.552-.472-.668a14 14 0 0 0-.872-1.046 43 43 0 0 1-.658-.696 11 11 0 0 0-.766-.748c-.154-.128-.42-.358-.596-.51s-.396-.328-.488-.386-.192-.132-.212-.158a18.4 18.4 0 0 0-3.72-2.206c-.2-.08-.536-.216-.744-.298a22 22 0 0 0-1.998-.642 25 25 0 0 0-2.338-.434c-.336-.042-.974-.072-1.87-.08-.748-.004-1.436-.004-1.53.004s-.37.034-.616.06m-9.266 41.166c.688.008 1.522.046 1.848.08s.748.086.936.11c.188.022.608.09.936.148s1.02.222 1.538.362c.522.136 1.182.336 1.466.438a22 22 0 0 1 2.33 1.002c.314.158.85.45 1.19.658.34.204.854.536 1.148.736s.93.634 1.424.964c.488.336 1.062.71 1.276.838.208.128.544.314.744.412.2.102.454.238.574.302.114.064.412.204.658.31s.668.276.936.382c.268.102.672.246.892.318a20 20 0 0 0 2.444.62 14.6 14.6 0 0 0 2.676.208c.73 0 1.254-.022 1.678-.072.34-.038.786-.102.998-.136a26 26 0 0 0 2.358-.608c.268-.09.748-.272 1.062-.408.314-.132.706-.31.872-.39.162-.086.506-.268.766-.408.256-.14.726-.43 1.042-.638.314-.212.79-.552 1.05-.76.264-.204.488-.374.502-.374s.022 1.344.022 5.972l-.094.06c-.056.034-.374.2-.714.37a23 23 0 0 1-2.57 1.044c-.28.092-.838.25-1.232.352s-.96.234-1.254.294-.76.144-1.042.192-.808.114-1.168.148-.794.076-.956.09-.748.022-1.296.022-1.288-.018-1.636-.042a27 27 0 0 1-2.742-.366 22 22 0 0 1-3.72-1.072 21 21 0 0 1-2.87-1.41 83 83 0 0 1-.872-.54 45 45 0 0 1-1.148-.77l-1.042-.722c-.2-.14-.59-.39-.872-.56s-.846-.48-1.254-.688-.956-.464-1.212-.566c-.26-.102-.62-.242-.808-.31s-.63-.204-.978-.298a19 19 0 0 0-2.338-.476 35 35 0 0 0-.914-.09 14 14 0 0 0-1.424-.022c-.578.012-1.168.06-1.678.128-.434.06-1.076.166-1.424.238-.352.072-.866.196-1.148.28a20 20 0 0 0-2.062.74c-.2.09-.552.256-.786.378-.234.118-.502.26-.596.31-.094.056-.34.204-.544.332l-.476.298c-.056.034-.298.204-.54.378s-.566.42-.726.544c-.158.124-.294.226-.306.226s-.022-1.326-.022-2.946c-.004-2.916 0-2.942.086-3.026.046-.046.09-.072.086-.056 0 .022.378-.154.838-.386.464-.23 1.07-.51 1.352-.62s.702-.268.936-.348.722-.23 1.084-.332.964-.25 1.338-.336c.374-.08.926-.188 1.232-.234a26 26 0 0 1 2.316-.26c.314-.02 1.14-.03 1.828-.018m0 8.844c.48.008 1.156.042 1.508.08a33 33 0 0 1 2.402.314c.246.046.722.148 1.062.234s.914.246 1.276.366.964.336 1.338.484c.374.144.978.412 1.338.596s.956.51 1.318.726.952.59 1.31.834.948.642 1.318.888c.366.25.906.6 1.198.778s.892.506 1.338.726c.442.222 1.054.506 1.36.63.306.128.8.31 1.106.412.306.098.85.25 1.212.344s.866.204 1.126.246l.766.128c.162.026.506.068.766.09.256.022.854.042 1.326.042a13.6 13.6 0 0 0 2.521-.216c.268-.046.696-.132.956-.192.256-.06.752-.192 1.106-.294.348-.102.808-.256 1.02-.34.208-.086.63-.272.936-.412s.714-.344.914-.45.532-.298.744-.43c.208-.128.536-.34.722-.468.188-.132.56-.404.828-.608.268-.208.502-.362.518-.344.018.022.03 1.364.012 5.938l-.318.182a20 20 0 0 1-1.148.548c-.454.2-1.012.43-1.232.506s-.642.216-.936.314c-.294.094-.82.238-1.168.322a22 22 0 0 1-1.934.4c-.294.05-.79.118-1.106.158-.314.034-.986.08-1.488.098s-1.088.026-1.296.022c-.212-.004-.672-.026-1.02-.038-.352-.018-.676-.034-.722-.042s-.222-.026-.382-.042a18 18 0 0 1-.99-.132 23 23 0 0 1-1.19-.208 45 45 0 0 1-1.156-.28 25 25 0 0 1-2.486-.812c-.234-.09-.846-.374-1.36-.63s-1.11-.566-1.318-.692c-.212-.124-.688-.43-1.062-.672s-1.046-.692-1.488-.994a72 72 0 0 0-1.446-.952 20 20 0 0 0-1.276-.726 19 19 0 0 0-1.296-.582 25 25 0 0 0-1.126-.408 18 18 0 0 0-.998-.276c-.294-.072-.692-.162-.892-.2s-.65-.106-.998-.154a15 15 0 0 0-1.594-.11 15 15 0 0 0-1.466.026c-.28.026-.684.064-.892.09a20 20 0 0 0-.978.154c-.328.064-.824.166-1.106.238-.28.068-.778.212-1.106.318s-.672.226-.766.268l-.426.17c-.141.056-.522.23-.85.382-.328.158-.888.46-1.246.672-.352.216-.748.464-.872.548-.118.086-.358.25-.518.366-.166.118-.386.302-.498.408s-.216.178-.234.162c-.022-.022-.034-1.348-.034-2.954 0-1.892.018-2.928.042-2.95.022-.022.264-.148.532-.284a23 23 0 0 1 1.848-.82c.234-.094.608-.238.828-.318s.68-.222 1.02-.314.914-.234 1.276-.318c.362-.08.85-.174 1.084-.212.234-.034.472-.068.532-.08l.488-.06c.208-.026.612-.064.892-.09.28-.03.77-.064 1.084-.086.314-.018.964-.026 1.446-.012m-.022 8.652c.676.018 1.53.056 1.892.094.362.034.858.094 1.106.128a26 26 0 0 1 1.934.386c.234.058.722.196 1.084.298.362.106.88.276 1.148.378s.582.226.702.276c.114.046.328.14.468.204a23 23 0 0 1 2.04 1.078c.328.199 1.1.706 1.722 1.122l1.552 1.042c.234.158.662.42.956.59a23 23 0 0 0 2.104 1.042c.233.098.774.298 1.198.442.43.14.808.26.842.26s.23.046.434.106c.208.06.604.154.884.212s.748.136 1.042.174c.294.034.74.076.998.094a18 18 0 0 0 2.084 0c.328-.018.804-.06 1.062-.098.256-.038.658-.106.892-.154s.702-.158 1.042-.25c.34-.09.778-.222.978-.294.2-.068.62-.234.936-.366.314-.128.6-.264.624-.298.03-.034.072-.056.098-.042.022.012.226-.076.446-.192.222-.118.63-.348.9-.518.276-.166.578-.362.672-.434a3 3 0 0 1 .238-.174c.038-.026.212-.14.382-.256a9 9 0 0 0 .6-.46c.158-.132.298-.238.31-.234.008.008.022.616.026 1.352 0 .736.004 2.074 0 4.612l-.502.276c-.276.148-.846.412-1.266.586-.42.17-1.1.426-1.508.566s-.99.318-1.296.4-.782.196-1.062.25a33 33 0 0 1-1.148.212c-.352.056-.812.124-1.02.148-.212.026-.642.064-.956.09s-1.032.046-1.594.046c-.56.004-1.296-.022-1.636-.046a26 26 0 0 1-2.826-.392c-.352-.068-.884-.192-1.19-.268s-.936-.268-1.402-.43a26 26 0 0 1-1.658-.634c-.446-.192-.922-.412-1.062-.488s-.502-.284-.808-.46-.766-.45-1.02-.62c-.26-.166-.696-.46-.978-.65s-.922-.624-1.424-.96c-.502-.34-1.106-.726-1.338-.862s-.692-.374-1.02-.528a19 19 0 0 0-2.082-.85 35 35 0 0 0-.872-.256 19 19 0 0 0-2.316-.442 23 23 0 0 0-1.19-.09 15 15 0 0 0-1.402.018c-.446.026-1.036.076-1.318.11-.28.038-.748.114-1.042.174s-.808.178-1.148.272-.79.226-.998.294a20 20 0 0 0-.926.34c-.298.118-.842.37-1.212.552a15 15 0 0 0-1.92 1.138c-.246.17-.63.45-.85.624a3.4 3.4 0 0 1-.438.322c-.018 0-.026-1.344-.008-5.962l.446-.226c.246-.128.638-.318.872-.426a19 19 0 0 1 2.124-.834 29 29 0 0 1 2.528-.672c.34-.068.816-.154 1.062-.192s.676-.094.956-.128.794-.076 1.148-.09c.348-.018.646-.038.658-.05.012-.008.574-.008 1.254.004m12.337-53.443c4.318.004 5.916.018 6.12.056a11 11 0 0 1 1.34.324c.188.064.528.212.756.332.336.174.488.294.766.574.192.192.39.42.446.51.056.086.166.288.246.454.08.162.182.468.234.68.076.328.086.476.068 1.042-.018.56-.034.71-.132.998-.06.188-.2.54-.31.786s-.272.56-.358.702-.264.416-.4.616-.344.476-.464.616-.276.332-.344.426-.222.284-.34.42c-.114.14-.318.37-.446.514l-.596.658c-.2.216-.39.43-.426.468-.034.042-.178.196-.318.348-.14.148-.31.34-.378.42s-.268.298-.446.484-.438.464-.574.616-.476.514-.748.808c-.276.294-.548.586-.6.658a8 8 0 0 1-.348.382 2 2 0 0 0-.242.284c0 .022.174.288.39.596.216.31.662.94.998 1.394l.79 1.084.498.68c.174.234.382.518.468.638l.582.786a65 65 0 0 1 1.004 1.404l.774 1.042c.332.442.794 1.066 1.028 1.382s.506.692.612.842c.182.26.188.268.102.328-.046.034-.344.238-.658.454-.314.212-.9.62-1.296.9s-.858.604-1.028.722l-1.02.702c-.39.268-.82.566-.948.658s-.492.344-.808.552-.6.378-.634.382-.11-.118-.182-.294c-.068-.166-.288-.702-.484-1.19-.2-.492-.386-.952-.42-1.02a48 48 0 0 1-.314-.786l-.45-1.148-.34-.828c-.08-.188-.306-.76-.51-1.276a30 30 0 0 0-.426-1.062c-.03-.072-.174-.426-.318-.786s-.374-.93-.514-1.266c-.136-.332-.25-.612-.25-.624s-.26-.676-.578-1.478l-.77-1.942c-.107-.268-.238-.596-.294-.722s-.226-.552-.378-.948c-.238-.608-.268-.722-.226-.794.03-.042.086-.094.118-.106s.132-.068.212-.128c.08-.056.204-.144.276-.192.068-.046.336-.242.596-.434.256-.188.552-.4.658-.472s.208-.148.234-.166c.022-.022.276-.204.556-.408.284-.204.722-.514.978-.688.25-.174.586-.416.744-.532.162-.118.464-.336.68-.488.212-.154.56-.4.778-.548.212-.144.48-.34.6-.426.114-.09.46-.34.766-.56.306-.216.706-.518.892-.668s.502-.426.692-.616c.276-.272.39-.42.51-.668.132-.276.158-.37.17-.702.018-.294 0-.438-.056-.616a2.3 2.3 0 0 0-.178-.396 1.8 1.8 0 0 0-.26-.31 1.6 1.6 0 0 0-.362-.256 2.7 2.7 0 0 0-.468-.166c-.226-.056-.952-.064-4.93-.064-4.402 0-4.662.004-4.68.072-.012.042-.11.536-.216 1.096s-.264 1.356-.344 1.764-.242 1.232-.362 1.828-.336 1.726-.488 2.508-.378 1.95-.51 2.592l-.426 2.146c-.102.536-.298 1.53-.426 2.21-.132.676-.39 1.994-.574 2.92a57 57 0 0 0-.336 1.786.4.4 0 0 1-.034.154c-.022.042-.63.05-2.92.05H30.01l.026-.118.272-.944.396-1.318a60 60 0 0 0 .284-.978c.072-.268.216-.748.318-1.062s.242-.794.318-1.062c.072-.268.17-.604.216-.744.042-.14.256-.85.464-1.572.212-.726.488-1.67.612-2.104l.654-2.232c.234-.796.544-1.848.684-2.338a226 226 0 0 0 .812-2.72c.136-.466.374-1.27.528-1.786.158-.514.336-1.05.404-1.19a3.4 3.4 0 0 1 .834-1.096 5 5 0 0 1 .552-.39c.14-.076.4-.192.574-.256s.45-.128.616-.144c.162-.018 2.928-.026 6.142-.022" style="fill:#c3c3c3"/></svg> <strong>REZIM70</strong> 
                    </span>
                </div>
            </div>
            
            <!-- Actions -->
            <div class="flex gap-3 mt-4">
                <button @click="downloadImage" :disabled="isGenerating" class="btn btn-primary flex-1">
                    {{ isGenerating ? 'Generating...' : 'üì• Download' }}
                </button>
                <button @click="shareImage" :disabled="isGenerating" class="btn btn-secondary flex-1">
                    üì§ Share
                </button>
                <button @click="emit('close')" class="btn btn-secondary">
                    ‚úï
                </button>
            </div>
        </div>
    </div>
</template>

<style scoped>
.share-card {
    background: #1a1a2e;
}

.text-primary {
    color: var(--color-primary);
}

.from-primary {
    --tw-gradient-from: var(--color-primary);
}
</style>
